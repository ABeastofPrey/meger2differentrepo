<div
	class="wrapper"
	(dragover)="onDragOverObject($event, null)"
	(drop)="onObjectDrop($event, null)"
>
	<h2>{{ 'simulator_screen.scene' | translate }}</h2>
	<mat-tree [dataSource]="nestedDataSource" [treeControl]="nestedTreeControl">
		<mat-tree-node *matTreeNodeDef="let node">
			<li class="leaf">
				<div
					(dblclick)="openFile(node)"
					(click)="selectNode(node)"
					draggable="true"
					[class.selected]="sim.selected === node"
					(dragstart)="onObjectDragStart($event, node)"
					(dragover)="onDragOverObject($event, node)"
					(drop)="onObjectDrop($event, node)"
				>
					<mat-icon>my_location</mat-icon>
					<span>{{ node.name }}</span>
				</div>
			</li>
		</mat-tree-node>
		<mat-nested-tree-node *matTreeNodeDef="let node; when: hasNestedChild">
			<li>
				<div
					draggable="true"
					[class.selected]="sim.selected === node"
					(dblclick)="toggleNode(node)"
					(click)="selectNode(node)"
					(dragstart)="onObjectDragStart($event, node)"
					(dragover)="onDragOverObject($event, node)"
					(drop)="onObjectDrop($event, node)"
				>
					<mat-icon>
						{{ nestedTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}
					</mat-icon>
					{{ node.name }}
				</div>
				<ul [class.invisible]="!nestedTreeControl.isExpanded(node)">
					<ng-container matTreeNodeOutlet></ng-container>
				</ul>
			</li>
		</mat-nested-tree-node>
	</mat-tree>
</div>
