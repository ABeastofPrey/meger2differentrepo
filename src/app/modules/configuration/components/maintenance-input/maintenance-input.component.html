<mat-card>
    <div class="mat-elevation-z8 table-contain">
        <table mat-table [dataSource]="dataSource" class="example-container matTable">

            <ng-container matColumnDef="moduleName">
                <th mat-header-cell *matHeaderCellDef class="header">
                    <div class="headerBottom"></div>
                    {{'maintenance.input.maintenance_type' | translate}}
                </th>
                <td mat-cell *matCellDef="let element">
                    {{element.moduleName | translate}}
                </td>
            </ng-container>

            <ng-container matColumnDef="usedLife">
                <th mat-header-cell *matHeaderCellDef class="header">
                    <div class="headerBottom"></div>
                    {{'maintenance.input.used_life' | translate}}
                </th>
                <td mat-cell *matCellDef="let element">
                    <div class="numInp">
                        <cs-number-input type="int" [rightClosedInterval]="false"
                            [(value)]="element.usedLife.control.value"
                            (isValidEvent)="isValidEvent($event,element.usedLife.index)" [disabled]="!isAdmin"
                            [suffix]='element.usedLife.unit' [min]="0" [max]="element.usedLife.max" [required]="true">
                        </cs-number-input>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="apply">
                <th mat-header-cell *matHeaderCellDef class="center header">
                    <div class="headerBottom"></div>
                    {{'maintenance.input.apply_to_type' | translate}}
                </th>
                <td mat-cell *matCellDef="let element" class="center">
                    <mat-checkbox class="example-margin" color="primary" [(ngModel)]="element.apply"
                        (ngModelChange)="checkedList()" [disabled]="!isAdmin"></mat-checkbox>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>

    <form [formGroup]="inputForm" *ngIf="saveBtn">
        <div class="form-contain form-contain-name">
            <mat-form-field>
                <input matInput maxlength="50" autocomplete="off" (keypress)="preventEnter($event)"
                    [placeholder]="'maintenance.input.person_company' | translate" formControlName="person">
                <mat-error *ngIf="!person.required">{{'maintenance.input.nameRequire' | translate}}</mat-error>
            </mat-form-field>
        </div>
        <div class="form-contain">
            <mat-form-field>
                <input matInput maxlength="50" autocomplete="off" type="text" (input)="limitNum($event)" (keypress)="preventEnter($event)"
                    [placeholder]="'maintenance.input.order_number' | translate" formControlName="orderNum">
                <mat-error *ngIf="!orderNum.required">{{'maintenance.input.ordernum' | translate}}</mat-error>
            </mat-form-field>
        </div>
        <div class="form-contain">
            <mat-form-field>
                <textarea matInput maxlength="400" autocomplete="off" (keypress)="preventEnter($event)" (paste)="false"
                    [placeholder]="'maintenance.input.comment' | translate" formControlName="comment"></textarea>
                <mat-error *ngIf="!comment.required">{{'maintenance.input.commentRequire' | translate}}</mat-error>
            </mat-form-field>
        </div>
        <button mat-raised-button [disabled]="!inputForm.valid || dataSourceCheck.length===0 || checkInvaild === false"
            color="primary" (click)="save()">
            {{'maintenance.input.save' | translate}}
        </button>
    </form>
</mat-card>