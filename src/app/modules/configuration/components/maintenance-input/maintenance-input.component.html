<mat-card>
    <div class="mat-elevation-z0 table-contain">
        <table mat-table [dataSource]="dataSource" class="example-container matTable">

            <ng-container matColumnDef="moduleName">
                <th mat-header-cell *matHeaderCellDef class="header">
                    <div class="headerBottom"></div>
                    {{'maintenance.input.maintenance_type' | translate}}
                </th>
                <td mat-cell *matCellDef="let element">
                    {{element.moduleName | translate}}
                </td>
            </ng-container>

            <ng-container matColumnDef="usedLife">
                <th mat-header-cell *matHeaderCellDef class="header">
                    <div class="headerBottom"></div>
                    {{'maintenance.input.used_life' | translate}}
                </th>
                <td mat-cell *matCellDef="let element">
                    <div class="numInp">
                        <custom-key-board type="int" [rightClosedInterval]="false"
                            [(value)]="element.usedLife.control.value" [isPositiveNum]="true"
                            (isValidEvent)="isValidEvent($event,element.usedLife.index)" [disabled]="!isAdmin"
                            [suffix]='element.usedLife.unit' [min]="0" [max]="element.usedLife.max" [required]="true">
                        </custom-key-board>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="apply">
                <th mat-header-cell *matHeaderCellDef class="center header">
                    <div class="headerBottom"></div>
                    {{'maintenance.input.apply_to_type' | translate}}
                </th>
                <td mat-cell *matCellDef="let element" class="center">
                    <mat-checkbox class="example-margin" color="primary" [(ngModel)]="element.apply"
                        (ngModelChange)="checkedList()" [disabled]="!isAdmin"></mat-checkbox>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>

    <form [formGroup]="inputForm" *ngIf="saveBtn">
        <div class="form-contain form-contain-name">
            <!-- <mat-form-field>
                <input matInput maxlength="50" autocomplete="off" (keypress)="preventEnter($event)"
                    [placeholder]="'maintenance.input.person_company' | translate" formControlName="person">
                <mat-error *ngIf="!person.required">{{'maintenance.input.nameRequire' | translate}}</mat-error>
            </mat-form-field> -->

            <custom-key-board
                type="string"
                [maxLength]="50"
                [required]="true"
                [(value)]="inputForm.value.person"
                (keypress)="preventEnter($event)"
                [disabled]="!isAdmin"
                (valueChange)="patchPerson($event)"
                (blurEvent)="patchPerson($event)"
                [placeHolder]="'maintenance.input.person_company' | translate">
            </custom-key-board>

        </div>
        <div class="form-contain">
            <!-- <mat-form-field>
                <input matInput maxlength="50" autocomplete="off" type="text"  (keypress)="preventEnter($event)"
                    [placeholder]="'maintenance.input.order_number' | translate" formControlName="orderNum">
                <mat-error *ngIf="!orderNum.required">{{'maintenance.input.ordernum' | translate}}</mat-error>
            </mat-form-field> -->
            <custom-key-board type="string" [required]="true"
                [disabled]="!isAdmin"
                [placeHolder]="'maintenance.input.order_number' | translate" [(value)]="inputForm.value.orderNum"
                (valueChange)="limitNum($event)"  (blurEvent)="limitNum($event)"
            ></custom-key-board>
        </div>
        <div class="form-contain">
            <!-- <mat-form-field>
                <textarea matInput maxlength="400" autocomplete="off" (keypress)="preventEnter($event)" (paste)="false"
                    [placeholder]="'maintenance.input.comment' | translate" formControlName="comment"></textarea>
                <mat-error *ngIf="!comment.required">{{'maintenance.input.commentRequire' | translate}}</mat-error>
            </mat-form-field> -->

            <custom-key-board
                type="string"
                [maxLength]="400"
                [disabled]="!isAdmin"
                [required]="true"
                [(value)]="inputForm.value.comment"
                (keypress)="preventEnter($event)"
                (valueChange)="patchComment($event)"
                (blurEvent)="patchComment($event)"
                [placeHolder]="'maintenance.input.comment' | translate">
            </custom-key-board>

        </div>
        <button mat-raised-button [disabled]="!inputForm.valid || dataSourceCheck.length===0 || checkInvaild === false"
            color="primary" (click)="save()">
            {{'maintenance.input.save' | translate}}
        </button>
    </form>
</mat-card>
