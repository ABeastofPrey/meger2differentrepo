<div class="wrapper">
  <div class="title">PRJ1</div>
  <mat-tree [dataSource]="nestedDataSource" [treeControl]="nestedTreeControl" tourAnchor="project-tree">
    <mat-tree-node *matTreeNodeDef="let node">
      <li class="leaf">
        <div (click)="openFile(node)" (click)="selectNode(node)" [class.selected]="lastSelectedNode === node">
          <mat-icon class="leaf" color="primary" *ngIf="node.type==='File'">insert_drive_file</mat-icon>
          <mat-icon class='leaf' color="primary" *ngIf="node.type==='Data'">format_list_numbered</mat-icon>
          <mat-icon class="leaf library" *ngIf="node.type==='Library'">insert_drive_file</mat-icon>
          <mat-icon class="leaf library" *ngIf="node.type==='Dependency'">public</mat-icon>
          <mat-icon color="primary" *ngIf="node.type==='Settings'">settings_applications</mat-icon>
          <mat-icon color="primary" *ngIf="node.type==='Errors'">error</mat-icon>
          <mat-icon color="primary" *ngIf="node.type==='Macros'">keyboard</mat-icon>
          <span>{{node.name}}</span>
        </div>
      </li>
    </mat-tree-node>
    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasNestedChild">
      <li>
        <div [class.selected]="lastSelectedNode === node" (click)="toggleNode(node)" (click)="selectNode(node)">
          <mat-icon>
            {{nestedTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
          </mat-icon>
          <mat-icon *ngIf="node.type==='Project'" class="primary">folder_special</mat-icon>
          <mat-icon *ngIf="node.type!=='Project'" class="primary-light">
            {{nestedTreeControl.isExpanded(node) ? 'folder_open' : 'folder'}}
          </mat-icon>
          {{node.name}}
        </div>
        <ul [class.invisible]="!nestedTreeControl.isExpanded(node)">
          <ng-container matTreeNodeOutlet></ng-container>
        </ul>
      </li>
    </mat-nested-tree-node>
  </mat-tree>
  <div class="title">Controller Files</div>
  <div class="file-list">
    <div *ngFor="let f of service.files" (click)="service.setFile(f);selectFile(f)" class="center-vertical" [class.selected]="lastSelectedFile === f">
      <mat-icon style="margin-right: 4px;" class="primary-light">insert_drive_file</mat-icon>
      <span class="mat-title-color">{{f.fileName}}</span>
    </div>
  </div>
</div>