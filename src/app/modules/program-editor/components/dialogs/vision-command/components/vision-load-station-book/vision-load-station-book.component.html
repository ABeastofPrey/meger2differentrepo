<form [formGroup]="form" (ngSubmit)="submitForm(form)">
	<mat-card class="command-card">
		<mat-card-header>
			<mat-card-title>
				{{ 'projectCommands.visionCommand.loadStationBookTitle' | translate }}
			</mat-card-title>
		</mat-card-header>
		<mat-card-content>
			<mat-form-field>
				<mat-select placeholder="{{ 'projectCommands.visionCommand.configFilePathPlaceHolder' | translate }}" 
							formControlName="configFilePath"
							(selectionChange)="loadFile(form.value.configFilePath)">
				  <mat-select-trigger>
					  {{form.controls['configFilePath'].value}}
				  </mat-select-trigger>
				  <mat-option *ngFor="let item of files" [value]="item.displayPath" (click)="selectItem(item)">
					  {{item.fileName}}
				 </mat-option>
				</mat-select>
				<mat-error *ngIf="form.controls['configFilePath'].hasError('required')">
					{{ 'projectCommands.visionCommand.configFilePathRequiredErr' | translate }}
				</mat-error>
				<mat-error *ngIf="form.controls['configFilePath'].hasError('loadFail')">
					{{ 'projectCommands.visionCommand.loadConfigFilePathError' | translate }}
				</mat-error>
			</mat-form-field>
			<mat-form-field>
				<mat-select placeholder="{{ 'projectCommands.visionCommand.variablePlaceHolder' | translate }}" 
							formControlName="assignedTo"
							[(ngModel)]="selectedVariable">
				  <mat-option [value]="null"></mat-option>
				  <mat-option *ngFor="let variable of longVariables" [value]="variable" (click)="selectVariable(variable)">
					  {{variable.name}}
				 </mat-option>
				 <mat-option class="create-point-option" (click)="createVariable()">
					+ {{ 'projectCommands.createVar' | translate }}
				</mat-option>
				</mat-select>
			</mat-form-field>
		</mat-card-content>
		<mat-card-actions>
			<button mat-button color="primary" [mat-dialog-close]="null" cdkFocusInitial>
				{{ 'button.cancel' | translate }}
			</button>
			<button mat-raised-button color="primary" type="submit" matTooltip="Save all changes" [disabled]="form.invalid || !successfullyLoaded">
				{{ 'button.insert' | translate }}
			</button>
		</mat-card-actions>
	</mat-card>
</form>
