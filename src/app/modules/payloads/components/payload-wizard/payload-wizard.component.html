<div class="mat-typography wizard">
	<div class="sbs" style="flex: 1;">
		<div class="menu mat-elevation-z3">
			<button
				mat-raised-button
				color="primary"
				(click)="newPayload()"
				*ngIf="!login.isOperator"
				class="btn-add"
			>
				<mat-icon>add</mat-icon>
				<span>{{ 'button.create' | translate }}</span>
			</button>
			<mat-form-field style="margin: 16px 0;">
				<mat-select
					placeholder="{{ 'payloads.payload' | translate }}"
					[(ngModel)]="selectedPayload"
					(ngModelChange)="onPayloadChange()"
				>
					<mat-option disabled *ngIf="data.payloads.length === 0">{{
						'empty_list' | translate
					}}</mat-option>
					<mat-option *ngFor="let p of data.payloads" [value]="p">
						{{ p.name }}
					</mat-option>
				</mat-select>
			</mat-form-field>
			<button
				mat-raised-button
				color="warn"
				*ngIf="selectedPayload && !login.isOperator"
				(click)="delete()"
			>
				{{ 'button.delete' | translate }}
			</button>
			<div
				*ngIf="currPayloadString"
				[innerHTML]="currPayloadString"
				style="margin-top: 16px;"
			></div>
		</div>
		<div *ngIf="selectedPayload" class="temp-scara-wizard">
			<div class="wizard-header" *ngIf="!login.isOperator || data.robotType !== 'SCARA'">
				<mat-slide-toggle color="primary" [(ngModel)]="advanced">{{
					'payloads.advanced' | translate
				}}</mat-slide-toggle>
			</div>
			<mat-form-field>
				<input
					matInput
					type="number"
					min="0"
					placeholder="{{ 'payloads.mass' | translate }}"
					(change)="onMassChange($event)"
					virtualKeyboard
					ktype="numeric"
					(onKeyboardClose)="onMassChange($event)"
					[formControl]="ctrlMass"
				/>
				<span matSuffix>[Kg]</span>
			</mat-form-field>
			<mat-form-field>
				<input
					matInput
					type="number"
					min="0"
					placeholder="{{ 'payloads.inertia' | translate }}"
					(change)="onInertiaChange($event)"
					virtualKeyboard
					ktype="numeric"
					(onKeyboardClose)="onInertiaChange($event)"
					[formControl]="ctrlInertia"
				/>
				<span matSuffix>[Kg * m<sup>2</sup>]</span>
			</mat-form-field>
			<mat-form-field>
				<input
					matInput
					type="number"
					min="0"
					placeholder="{{ 'payloads.offX' | translate }}"
					(change)="onXOffsetChange($event)"
					virtualKeyboard
					ktype="numeric"
					(onKeyboardClose)="onXOffsetChange($event)"
					[formControl]="ctrlLx"
				/>
				<span matSuffix>[m]</span>
			</mat-form-field>
			<table class="advanced-table" *ngIf="advanced">
				<thead>
					<tr>
						<td>Field</td>
						<td>J1</td>
						<td>J2</td>
						<td>J3</td>
						<td>J4</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>{{ 'payloads.start_pos' | translate }}</td>
						<td *ngFor="let i of [0, 1, 2, 3]">
							<mat-form-field appearance="outline">
								<input
									matInput
									[(ngModel)]="data.payloadStart[i]"
									type="number"
									(change)="data.onPayloadStartChange()"
									virtualKeyboard
									ktype="numeric"
									(onKeyboardClose)="data.onPayloadStartChange()"
								/>
								<span matSuffix>{{ i !== 2 ? '[deg]' : '[mm]' }}</span>
							</mat-form-field>
						</td>
					</tr>
					<tr>
						<td>{{ 'payloads.relative_pos' | translate }}</td>
						<td *ngFor="let i of [0, 1, 2, 3]">
							<mat-form-field appearance="outline">
								<input
									matInput
									[(ngModel)]="data.payloadRelative[i]"
									type="number"
									(change)="data.onPayloadRelativeChange()"
									virtualKeyboard
									ktype="numeric"
									(onKeyboardClose)="data.onPayloadRelativeChange()"
								/>
								<span matSuffix>{{ i !== 2 ? '[deg]' : '[mm]' }}</span>
							</mat-form-field>
						</td>
					</tr>
					<tr>
						<td>{{ 'payloads.freq' | translate }}</td>
						<td *ngFor="let i of [0, 1, 2, 3]">
							<mat-form-field appearance="outline">
								<input
									matInput
									[(ngModel)]="data.payloadFreq[i]"
									type="number"
									(change)="data.onPayloadFreqChange()"
									virtualKeyboard
									ktype="numeric"
									(onKeyboardClose)="data.onPayloadFreqChange()"
								/>
								<span matSuffix>[Hz.]</span>
							</mat-form-field>
						</td>
					</tr>
					<tr class="table-end">
						<td>{{ 'payloads.time' | translate }}</td>
						<td>
							<mat-form-field appearance="outline">
								<input
									matInput
									[(ngModel)]="data.payloadDuration"
									type="number"
									(change)="data.onPayloadDurationChange()"
									virtualKeyboard
									ktype="numeric"
									(onKeyboardClose)="data.onPayloadDurationChange()"
								/>
								<span matSuffix>[s]</span>
							</mat-form-field>
						</td>
						<td colspan="3">
							<button mat-raised-button color="primary" (click)="showIdentDialog()">
								{{ 'payloads.ident.start' | translate }}
							</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
