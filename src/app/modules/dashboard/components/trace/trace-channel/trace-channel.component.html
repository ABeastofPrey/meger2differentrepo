<mat-card>
    <mat-form-field class="module-container">
        <mat-label>{{'dashboard.trace.module_label' | translate}}</mat-label>
        <mat-select [disableOptionCentering]="true"
            (selectionChange)="changeModule()"
            [disabled]="!selectedTrace"
            [(ngModel)]="selectedModule">
            <mat-option *ngFor="let m of moduleList" [value]="m">{{m}}</mat-option>
        </mat-select>
        <mat-hint *ngIf="!selectedTrace">
            {{'dashboard.trace.no_trace_choosed_tip' | translate}}
        </mat-hint>
    </mat-form-field>

    <div cdkDropListGroup class="drag-drop-container-boundary">
        <!-- Available item list -->
        <div class="drag-drop-container">
            <div class="label">
                <span>{{'dashboard.trace.available_channel' | translate}}</span>
            </div>
            <div class="content">
                <cdk-virtual-scroll-viewport itemSize="40" [style.height]="'360px'">
                    <div *cdkVirtualFor="let item of todoItems"
                        class="drag-drop-item"
                        [ngStyle]="{'color': item.disabled ? 'rgba(0, 0, 0, 0.26)' : 'inherit'}">
                        <span>{{item.module}}</span>
                        <span>{{item.variable}}</span>
                        <mat-select *ngIf="item.isIO"
                            [disabled]="item.disabled"
                            [disableOptionCentering]="true"
                            [(ngModel)]="item.turnOn">
                            <mat-option [disabled]="item.axis1Disabled" [value]="1">1</mat-option>
                            <mat-option [disabled]="item.axis2Disabled" [value]="2">2</mat-option>
                            <mat-option [disabled]="item.axis3Disabled" [value]="3">3</mat-option>
                            <mat-option [disabled]="item.axis4Disabled" [value]="4">4</mat-option>
                            <mat-option [value]="0">All</mat-option>
                        </mat-select>
                        <button [disabled]="item.disabled"
                            (click)="selectOne(item)"
                            mat-icon-button color="primary">
                            <mat-icon>add</mat-icon>
                        </button>
                    </div>
                </cdk-virtual-scroll-viewport>
            </div>
        </div>
        <!-- Selected item list -->
        <div class="drag-drop-container">
            <div class="label">
                <span>{{'dashboard.trace.selected_channel' | translate}}</span>
                <button [disabled]="selectedTrace === '' || doneItems.length === 0"
                    (click)="unselectAll()"
                    mat-stroked-button color="primary">
                    {{'dashboard.trace.remove_all' | translate}}
                </button>
            </div>
            <div class="content">
                <div *ngFor="let item of doneItems"
                    class="drag-drop-item">
                    <span>
                        <div>{{item.module}}</div>
                        <div *ngIf="item.isIO">
                            {{'dashboard.trace.channel.instance' | translate }}: {{item.turnOn}}
                        </div>
                    </span>
                    <span>{{item.variable}}</span>
                    <button mat-icon-button
                        (click)="unselectOne(item)"
                        color="primary">
                        <mat-icon>clear</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>
</mat-card>
